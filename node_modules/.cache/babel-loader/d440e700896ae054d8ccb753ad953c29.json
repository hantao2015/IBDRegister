{"ast":null,"code":"import http from \"http\"; // 设置默认的基地址\n\nhttp.setDefaultBaseURL(\"http://ivf.realsun.me:9001\"); // 设置默认的请求头\n\nhttp.setDefaultHeaders({\n  \"Content-Type\": \"application/json\"\n}); // 创建定制的获取提醒数量的 api，方法名为 'getReminderNum'\n\nhttp.createApi(\"getReminderNum\", {\n  method: \"get\",\n  // 使用 get 方法\n  url: \"/api/Resource/RetrieveReminderNum\" // 请求地址\n\n});\nhttp.setRequestInterceptors(function (config) {\n  // 请求头加上 token\n  let token;\n\n  if (token = localStorage.get(\"token\")) {\n    config.headers.token = token;\n  }\n\n  return config;\n}, function (error) {\n  return error;\n}); // 响应拦截\n\nhttp.setResponseInterceptors(response => {\n  const res = response.data;\n\n  if (res && (res.error === 0 || res.error === \"0\" || res.Error === 0 || res.Error === \"0\" || res.OpResult === \"Y\") || res === \"ok\") {\n    return response;\n  } else {\n    throw new Error(res.ErrMsg || res.message || res.ErrorMsg);\n  }\n}, error => {\n  if (error.response.status === 401) {// window.location.href = \"/login\";\n  }\n\n  return error;\n}); //获取验证码\n\nhttp.createApi(\"getVerCode\", {\n  method: \"get\",\n  url: \"api/SMS/SMS_SendValidCode\"\n});\n/**\n * 注册\n * 参数：{ telephone, unionid, openid, validCode, personid, method }\n * 1. telephone：手机号\n * 2. unionid：unionid\n * 3. openid: openid\n * 4. personid：身份证\n * 5. method：method\n * openid,telephone,unionid,validCode,workNum\n */\n\nhttp.createApi(\"register\", {\n  method: \"get\",\n  // baseURL: 'https://finisar.realsun.me/',\n  url: \"api/Account/Register\"\n});\n/**\n *登录\n */\n\nhttp.createApi(\"login\", {\n  method: \"post\",\n  url: \"/api/Account/Login\"\n});\nexport default http;","map":{"version":3,"sources":["/Users/mac/Desktop/ibd-apply/src/utils/api.js"],"names":["http","setDefaultBaseURL","setDefaultHeaders","createApi","method","url","setRequestInterceptors","config","token","localStorage","get","headers","error","setResponseInterceptors","response","res","data","Error","OpResult","ErrMsg","message","ErrorMsg","status"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB,C,CACA;;AACAA,IAAI,CAACC,iBAAL,CAAuB,4BAAvB,E,CAEA;;AACAD,IAAI,CAACE,iBAAL,CAAuB;AACrB,kBAAgB;AADK,CAAvB,E,CAIA;;AACAF,IAAI,CAACG,SAAL,CAAe,gBAAf,EAAiC;AAC/BC,EAAAA,MAAM,EAAE,KADuB;AAChB;AACfC,EAAAA,GAAG,EAAE,mCAF0B,CAEU;;AAFV,CAAjC;AAKAL,IAAI,CAACM,sBAAL,CACE,UAASC,MAAT,EAAiB;AACf;AACA,MAAIC,KAAJ;;AACA,MAAKA,KAAK,GAAGC,YAAY,CAACC,GAAb,CAAiB,OAAjB,CAAb,EAAyC;AACvCH,IAAAA,MAAM,CAACI,OAAP,CAAeH,KAAf,GAAuBA,KAAvB;AACD;;AACD,SAAOD,MAAP;AACD,CARH,EASE,UAASK,KAAT,EAAgB;AACd,SAAOA,KAAP;AACD,CAXH,E,CAcA;;AACAZ,IAAI,CAACa,uBAAL,CACEC,QAAQ,IAAI;AACV,QAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AACA,MACGD,GAAG,KACDA,GAAG,CAACH,KAAJ,KAAc,CAAd,IACCG,GAAG,CAACH,KAAJ,KAAc,GADf,IAECG,GAAG,CAACE,KAAJ,KAAc,CAFf,IAGCF,GAAG,CAACE,KAAJ,KAAc,GAHf,IAICF,GAAG,CAACG,QAAJ,KAAiB,GALjB,CAAJ,IAMAH,GAAG,KAAK,IAPV,EAQE;AACA,WAAOD,QAAP;AACD,GAVD,MAUO;AACL,UAAM,IAAIG,KAAJ,CAAUF,GAAG,CAACI,MAAJ,IAAcJ,GAAG,CAACK,OAAlB,IAA6BL,GAAG,CAACM,QAA3C,CAAN;AACD;AACF,CAhBH,EAiBET,KAAK,IAAI;AACP,MAAIA,KAAK,CAACE,QAAN,CAAeQ,MAAf,KAA0B,GAA9B,EAAmC,CACjC;AACD;;AACD,SAAOV,KAAP;AACD,CAtBH,E,CAwBA;;AACAZ,IAAI,CAACG,SAAL,CAAe,YAAf,EAA6B;AAC3BC,EAAAA,MAAM,EAAE,KADmB;AAE3BC,EAAAA,GAAG,EAAE;AAFsB,CAA7B;AAKA;;;;;;;;;;;AAUAL,IAAI,CAACG,SAAL,CAAe,UAAf,EAA2B;AACzBC,EAAAA,MAAM,EAAE,KADiB;AAEzB;AACAC,EAAAA,GAAG,EAAE;AAHoB,CAA3B;AAMA;;;;AAGAL,IAAI,CAACG,SAAL,CAAe,OAAf,EAAwB;AACtBC,EAAAA,MAAM,EAAE,MADc;AAEtBC,EAAAA,GAAG,EAAE;AAFiB,CAAxB;AAIA,eAAeL,IAAf","sourcesContent":["import http from \"http\";\n// 设置默认的基地址\nhttp.setDefaultBaseURL(\"http://ivf.realsun.me:9001\");\n\n// 设置默认的请求头\nhttp.setDefaultHeaders({\n  \"Content-Type\": \"application/json\"\n});\n\n// 创建定制的获取提醒数量的 api，方法名为 'getReminderNum'\nhttp.createApi(\"getReminderNum\", {\n  method: \"get\", // 使用 get 方法\n  url: \"/api/Resource/RetrieveReminderNum\" // 请求地址\n});\n\nhttp.setRequestInterceptors(\n  function(config) {\n    // 请求头加上 token\n    let token;\n    if ((token = localStorage.get(\"token\"))) {\n      config.headers.token = token;\n    }\n    return config;\n  },\n  function(error) {\n    return error;\n  }\n);\n\n// 响应拦截\nhttp.setResponseInterceptors(\n  response => {\n    const res = response.data;\n    if (\n      (res &&\n        (res.error === 0 ||\n          res.error === \"0\" ||\n          res.Error === 0 ||\n          res.Error === \"0\" ||\n          res.OpResult === \"Y\")) ||\n      res === \"ok\"\n    ) {\n      return response;\n    } else {\n      throw new Error(res.ErrMsg || res.message || res.ErrorMsg);\n    }\n  },\n  error => {\n    if (error.response.status === 401) {\n      // window.location.href = \"/login\";\n    }\n    return error;\n  }\n);\n//获取验证码\nhttp.createApi(\"getVerCode\", {\n  method: \"get\",\n  url: \"api/SMS/SMS_SendValidCode\"\n});\n\n/**\n * 注册\n * 参数：{ telephone, unionid, openid, validCode, personid, method }\n * 1. telephone：手机号\n * 2. unionid：unionid\n * 3. openid: openid\n * 4. personid：身份证\n * 5. method：method\n * openid,telephone,unionid,validCode,workNum\n */\nhttp.createApi(\"register\", {\n  method: \"get\",\n  // baseURL: 'https://finisar.realsun.me/',\n  url: \"api/Account/Register\"\n});\n\n/**\n *登录\n */\nhttp.createApi(\"login\", {\n  method: \"post\",\n  url: \"/api/Account/Login\"\n});\nexport default http;\n"]},"metadata":{},"sourceType":"module"}