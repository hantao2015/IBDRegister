{"ast":null,"code":"\"use strict\";\n\nvar _httpCore = _interopRequireDefault(require(\"../httpCore\"));\n\nvar _util = require(\"../util\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\n * 移除记录（需要有 REC_ID 字段）\n */\n\n/**\n * 处理请求体\n * @param {object} reqBody 删除记录时发送给后端的请求体（未处理）\n *\n * @param {number} reqBody.resid 表资源 id\n * @param {array} reqBody.data 要删除的记录\n * @param {boolean} reqBody.isEditOrAdd 是否使用 'editoradd' 状态\n *\n */\n\n\nvar dealRequestBody = function dealRequestBody(reqBody) {\n  var newReqBody = (0, _util.clone)(reqBody); // 防止改变传进来的 records ，从而影响外面\n\n  var state = newReqBody.isEditOrAdd ? 'editoradd' : 'removed';\n  newReqBody.data.forEach(function (record, index) {\n    record._id = index + 1;\n    record._state = state;\n  });\n  newReqBody.data = JSON.stringify(newReqBody.data);\n  return newReqBody;\n};\n\n_httpCore.default.createApi('removeRecords', {\n  method: 'post',\n  url: '/api/100/table/Save'\n}, dealRequestBody);","map":null,"metadata":{},"sourceType":"script"}