{"ast":null,"code":"import _Spin from \"antd/es/spin\";\nimport _Upload from \"antd/es/upload\";\nimport _Input from \"antd/es/input\";\nimport _List from \"antd/es/list\";\nimport _Popconfirm from \"antd/es/popconfirm\";\nimport _Button from \"antd/es/button\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport _Form from \"antd/es/form\";\nimport _Icon from \"antd/es/icon\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/Users/mac/Desktop/IBDRegister/src/components/busniess/ApplyDataBase/ApplyDataBase.js\";\nimport React, { Component } from \"react\";\nimport \"./ApplyDataBase.less\";\nimport http from \"../../../utils/api\";\nimport ShowImage from \"./ShowImage\";\nimport applyDataBaseImage from \"../../../assets/images/applyDataBase.jpg\";\nconst applyDataBaseId = \"620384838453\";\n\nconst uploadFile = (file, url) => {\n  return new Promise((resolve, reject) => {\n    let fd = new FormData();\n    fd.append(\"file\", file, file.name);\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url);\n\n    xhr.onload = () => {\n      const data = JSON.parse(xhr.response);\n\n      if (xhr.status === 200 && (data.error === 0 || data.error === \"0\")) {\n        const imgUrl = data.data;\n        resolve(imgUrl);\n      } else {\n        reject(data);\n      }\n    };\n\n    xhr.send(fd);\n  });\n};\n\nclass ApplyDataBase extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      imageUrl: \"\",\n      applyList: [],\n      page: \"listPage\",\n      record: {},\n      loading: false\n    };\n\n    this.componentDidMount = async () => {\n      let res;\n      await this.getApplyData();\n    };\n\n    this.getApplyData = async () => {\n      let res;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        res = await http().getTable({\n          resid: applyDataBaseId\n        });\n        console.log(\"res.data.data\", res.data.data);\n        let data = [];\n        res.data.data.map(item => {\n          let studyType = item.studyType && item.studyType.split(\",\");\n          item.studyType = studyType;\n          data.push(item);\n        });\n\n        if (res.data.error == 0) {\n          this.setState({\n            applyList: data\n          });\n        }\n      } catch (error) {\n        _message.error(error.message);\n      }\n\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.onApply = () => {\n      this.setState({\n        page: \"applyPage\"\n      });\n    };\n\n    this.onBack = () => {\n      this.setState({\n        page: \"listPage\"\n      });\n    };\n\n    this.onCheck = item => {\n      console.log(\"bbbb\");\n      this.setState({\n        page: \"checkPage\",\n        record: item\n      });\n    };\n\n    this.showImage = () => {\n      this.setState({\n        page: \"showImagePage\"\n      });\n    };\n\n    this.onChangeCheckbox = checkedValues => {// console.log(\"checkedValues\", study);\n    };\n\n    this.handleSubmit = (e, type) => {\n      // console.log(\"e\",e,type)\n      // e.preventDefault();\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          this.onSubmit(values, type);\n        }\n      });\n    };\n\n    this.onSubmitRecord = async record => {\n      let res;\n      record.isSubmit = \"Y\";\n\n      try {\n        res = await http().modifyRecords({\n          resid: applyDataBaseId,\n          data: [record]\n        });\n\n        if (res.data.Error == 0) {\n          _message.success(\"提交成功\");\n        }\n      } catch (error) {\n        _message.error(error.message);\n      }\n    };\n\n    this.handleUploadFile = async fileInfo => {\n      const file = fileInfo.file;\n      const bucketname = \"realsun\";\n      const type = \"\";\n      const fileUrl = \"http://ivf.realsun.me:9001/api/AliyunOss/PutOneImageObject?bucketname=\".concat(encodeURIComponent(bucketname), \"&srctype=\").concat(encodeURIComponent(type));\n\n      try {\n        await uploadFile(file, fileUrl).then(imageUrl => {\n          this.setState({\n            imageUrl\n          });\n        });\n      } catch (err) {\n        return _message.error(err.message);\n      }\n    };\n\n    this.onSubmit = async (values, type) => {\n      let res;\n      let obj = {};\n      let study = values.study && values.study.toString();\n\n      if (type === 1) {\n        obj = {\n          doctor: values.doctor,\n          hospital: values.hospital,\n          post: values.post,\n          phoneNumber: values.phone,\n          email: values.email,\n          teamPeople: values.teamPeople,\n          teamPeople2: values.teamPeople2,\n          teamPeople3: values.teamPeople3,\n          studyType: values.study,\n          CDPatientNumber: values.CDNumber,\n          UCPatientNumber: values.UCNumber,\n          doctorPhoto: this.state.imageUrl,\n          studyType: study\n        };\n      } else {\n        obj = {\n          doctor: values.doctor,\n          hospital: values.hospital,\n          post: values.post,\n          phoneNumber: values.phone,\n          email: values.email,\n          teamPeople: values.teamPeople,\n          teamPeople2: values.teamPeople2,\n          teamPeople3: values.teamPeople3,\n          studyType: values.study,\n          CDPatientNumber: values.CDNumber,\n          UCPatientNumber: values.UCNumber,\n          doctorPhoto: this.state.imageUrl,\n          studyType: study,\n          isSubmit: \"Y\"\n        };\n      }\n\n      try {\n        res = await http().addRecords({\n          resid: applyDataBaseId,\n          data: [obj]\n        });\n\n        if (res.data.Error == 0) {\n          _message.success(\"申请成功！\");\n        }\n\n        this.setState({\n          page: \"listPage\"\n        });\n        this.getApplyData();\n      } catch (error) {\n        _message.error(error.message);\n      }\n    };\n\n    this.getBase64 = (img, callback) => {\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => callback(reader.result));\n      reader.readAsDataURL(img);\n    };\n\n    this.handleChange = info => {\n      console.log(\"info\", info);\n\n      if (info.file.status === \"uploading\") {\n        return;\n      }\n\n      if (info.file.status === \"done\") {\n        // Get this url from response in real world.\n        this.getBase64(info.file.originFileObj, imageUrl => this.setState({\n          imageUrl\n        }));\n      }\n    };\n\n    this.renderPage = () => {\n      let page = this.state.page; // switch(page){\n      //   case 'applyPage':\n      //     return (\n      //       this.applyPage\n      //     )\n      //     case 'checkPage':\n      //       return (\n      //         applyPage\n      //       )\n      //       case 'listPage':\n      //         return (\n      //           listPage\n      //         )\n      // }\n    };\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const prop = this.props;\n    const _this$state = this.state,\n          imageUrl = _this$state.imageUrl,\n          applyList = _this$state.applyList,\n          loading = _this$state.loading,\n          page = _this$state.page,\n          record = _this$state.record;\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    };\n    const uploadButton = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: this.state.loading ? \"loading\" : \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, \"Upload\"));\n    const options = [{\n      label: \"单中心研究\",\n      value: \"单中心研究\"\n    }, {\n      label: \"多中心研究\",\n      value: \"多中心研究\"\n    }, {\n      label: \"第三方研究\",\n      value: \"第三方研究\"\n    }, {\n      label: \"所有研究\",\n      value: \"所有研究\"\n    }];\n    const showImagePage = React.createElement(ShowImage, {\n      image: applyDataBaseImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    });\n    const checkPage = React.createElement(_Form, Object.assign({}, formItemLayout, {\n      // onSubmit={this.handleSubmit}\n      className: \"applyDataBase-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, \"\\u53C2\\u4E0ECHASE-IBD\\u6570\\u636E\\u5E93\\u5EFA\\u8BBE\\u7533\\u8BF7\\u8868\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, \"\\u7533\\u8BF7\\u533B\\u7597\\u5355\\u4F4D\"), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, \"\\u7533\\u8BF7\\u4EBA\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, record.doctor)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, \"\\u6240\\u5C5E\\u5355\\u4F4D\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, record.hospital)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, \"\\u804C\\u79F0\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, record.post)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"\\u8054\\u7CFB\\u7535\\u8BDD\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, record.phoneNumber)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"E-mail\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    }, record.email)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, \"IBD\\u6CBB\\u7597\\u56E2\\u961F\\u540D\\u5355\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, record.teamPeople), \"\\xA0\\xA0\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, record.teamPeople2), \"\\xA0\\xA0\", React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, record.teamPeople3), \"\\xA0\\xA0\"), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"\\u9009\\u62E9\\u53C2\\u4E0E\\u6570\\u636E\\u5E93\\u7814\\u7A76\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(_Checkbox.Group, {\n      options: options,\n      defaultValue: record.studyType,\n      onChange: this.onChangeCheckbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    })), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, \"\\u8D35\\u9662\\u76EE\\u524D\\u60A3\\u8005\\u6570\\u91CF\"), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324\n        },\n        __self: this\n      }, \"CD\\u60A3\\u8005\\u6570\\u91CF\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325\n      },\n      __self: this\n    }, record.CDPatientNumber)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, \"UC\\u60A3\\u8005\\u6570\\u91CF\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, record.UCPatientNumber)), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, \"\\u533B\\u5E08\\u6267\\u7167\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: record.doctorPhoto,\n      alt: \"avatar\",\n      style: {\n        backgroundSize: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    })), React.createElement(_Button, {\n      icon: \"download\",\n      type: \"primary\",\n      className: \"applyDataBase-form-print\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \"\\u6253\\u5370\"));\n    const listPage = React.createElement(_List, {\n      className: \"applyDataBase-content-list\",\n      itemLayout: \"horizontal\",\n      dataSource: applyList,\n      renderItem: item => React.createElement(_List.Item, {\n        actions: [React.createElement(\"a\", {\n          key: \"list-loadmore-edit\",\n          onClick: () => {\n            this.onCheck(item);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 355\n          },\n          __self: this\n        }, \"\\u67E5\\u770B\"), React.createElement(_Popconfirm, {\n          title: \"\\u4F60\\u786E\\u5B9A\\u8981\\u63D0\\u4EA4\\u5417\",\n          onConfirm: () => {\n            this.onSubmitRecord(item);\n          },\n          okText: \"Yes\",\n          cancelText: \"No\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          key: \"list-loadmore-edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 371\n          },\n          __self: this\n        }, \"\\u63D0\\u4EA4\"))],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353\n        },\n        __self: this\n      }, React.createElement(_List.Item.Meta, {\n        // avatar={\n        //   <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n        // }\n        title: React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 381\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          className: \"applyDataBase-content-list-word\",\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 382\n          },\n          __self: this\n        }, \"\\u7533\\u8BF7\\u4EBA:\", item.doctor), React.createElement(\"a\", {\n          className: \"applyDataBase-content-list-word\",\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 385\n          },\n          __self: this\n        }, \"\\u6240\\u5C5E\\u5355\\u4F4D:\", item.hospital)),\n        description: \"\\u8349\\u7A3F\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, \"\\u7533\\u8BF7\\u65E5\\u671F\\uFF1A\", item.REC_CRTTIME)),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    });\n    const applyPage = React.createElement(_Form, Object.assign({}, formItemLayout, {\n      // onSubmit={this.handleSubmit}\n      className: \"applyDataBase-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404\n      },\n      __self: this\n    }, \"\\u53C2\\u4E0ECHASE-IBD\\u6570\\u636E\\u5E93\\u5EFA\\u8BBE\\u7533\\u8BF7\\u8868\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, \"\\u7533\\u8BF7\\u533B\\u7597\\u5355\\u4F4D\"), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, \"\\u7533\\u8BF7\\u4EBA\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, getFieldDecorator(\"doctor\", {\n      rules: [{\n        required: true,\n        message: \"请输入申请人\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, \"\\u6240\\u5C5E\\u5355\\u4F4D\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417\n      },\n      __self: this\n    }, getFieldDecorator(\"hospital\", {\n      rules: [{\n        required: true,\n        message: \"请输入所属单位\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, \"\\u804C\\u79F0\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 428\n      },\n      __self: this\n    }, getFieldDecorator(\"post\", {\n      rules: [{\n        required: true,\n        message: \"请输入您的职称！\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439\n        },\n        __self: this\n      }, \"\\u8054\\u7CFB\\u7535\\u8BDD\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439\n      },\n      __self: this\n    }, getFieldDecorator(\"phone\", {\n      rules: [{\n        required: true,\n        message: \"请输入您的联系电话!\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450\n        },\n        __self: this\n      }, \"E-mail\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, getFieldDecorator(\"email\", {\n      rules: [{\n        required: true,\n        message: \"请输入您的邮箱!\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 461\n        },\n        __self: this\n      }, \"IBD\\u6CBB\\u7597\\u56E2\\u961F\\u540D\\u5355\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, getFieldDecorator(\"teamPeople\")(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    })), getFieldDecorator(\"teamPeople2\", {})(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    })), getFieldDecorator(\"teamPeople3\", {})(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466\n        },\n        __self: this\n      }, \"\\u9009\\u62E9\\u53C2\\u4E0E\\u6570\\u636E\\u5E93\\u7814\\u7A76\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }, getFieldDecorator(\"study\", {\n      rules: []\n    })(React.createElement(_Checkbox.Group, {\n      options: options,\n      onChange: this.onChangeCheckbox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470\n      },\n      __self: this\n    }))), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476\n      },\n      __self: this\n    }, \"\\u8D35\\u9662\\u76EE\\u524D\\u60A3\\u8005\\u6570\\u91CF\"), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478\n        },\n        __self: this\n      }, \"CD\\u60A3\\u8005\\u6570\\u91CF\\uFF1A\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 478\n      },\n      __self: this\n    }, getFieldDecorator(\"CDNumber\", {\n      rules: [{\n        required: true,\n        message: \"请输入贵院的CD患者数量!\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489\n        },\n        __self: this\n      }, \"UC\\u60A3\\u8005\\u6570\\u91CF\\uFF1A\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489\n      },\n      __self: this\n    }, getFieldDecorator(\"UCNumber\", {\n      rules: [{\n        required: true,\n        message: \"请输入贵院的UC患者数量!\",\n        whitespace: true\n      }]\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 500\n        },\n        __self: this\n      }, \"\\u533B\\u5E08\\u6267\\u7167\\uFF1A\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500\n      },\n      __self: this\n    }, getFieldDecorator(\"doctorPhoto\", {})(React.createElement(_Upload, {\n      name: \"avatar\",\n      listType: \"picture-card\",\n      className: \"avatar-uploader\",\n      showUploadList: false,\n      customRequest: this.handleUploadFile // fileList={fileList}\n      ,\n      onRemove: this.handleRemoveFile,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }, imageUrl ? React.createElement(\"img\", {\n      src: imageUrl,\n      alt: \"avatar\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513\n      },\n      __self: this\n    }) : uploadButton))), React.createElement(_Button, {\n      className: \"applyDataBase-form-save\",\n      htmlType: \"submit\",\n      onClick: () => {\n        this.handleSubmit(this, 1);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520\n      },\n      __self: this\n    }, \"\\u4FDD\\u5B58\"), React.createElement(_Button, {\n      type: \"primary\",\n      className: \"applyDataBase-form-submit\",\n      htmlType: \"submit\",\n      onClick: () => {\n        this.handleSubmit(this, 2);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    }, \"\\u63D0\\u4EA4\"));\n    return React.createElement(\"div\", {\n      className: \"applyDataBase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"applyDataBase-btns\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      icon: prop.page === \"applyPage\" || prop.page === \"checkPage\" ? \"rollback\" : \"plus\",\n      type: \"primary\",\n      onClick: prop.page === \"applyPage\" || prop.page === \"checkPage\" ? this.props.onBack : this.props.onApply,\n      className: \"applyDataBase-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545\n      },\n      __self: this\n    }, prop.page === \"applyPage\" || prop.page === \"checkPage\" ? \"返回\" : \"申请\"), React.createElement(\"a\", {\n      className: \"applyDataBase-photoBtn\",\n      type: \"link\",\n      onClick: prop.page === \"showImagePage\" ? this.props.onBack : this.props.showImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559\n      },\n      __self: this\n    }, prop.isShowImage ? '' : prop.page === \"showImagePage\" ? \"返回\" : \"申请流程图\")), React.createElement(_Spin, {\n      spinning: loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"applyDataBase-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568\n      },\n      __self: this\n    }, (() => {\n      console.log(\"prop\", prop);\n\n      switch (prop.page) {\n        case \"listPage\":\n          return prop.pages.listPage;\n\n        case \"applyPage\":\n          return prop.pages.applyPage;\n\n        case \"checkPage\":\n          return prop.pages.checkPage;\n\n        case \"showImagePage\":\n          return prop.pages.showImagePage;\n      }\n    })())));\n  }\n\n}\n\nexport default _Form.create()(ApplyDataBase);","map":{"version":3,"sources":["/Users/mac/Desktop/IBDRegister/src/components/busniess/ApplyDataBase/ApplyDataBase.js"],"names":["React","Component","http","ShowImage","applyDataBaseImage","applyDataBaseId","uploadFile","file","url","Promise","resolve","reject","fd","FormData","append","name","xhr","XMLHttpRequest","open","onload","data","JSON","parse","response","status","error","imgUrl","send","ApplyDataBase","constructor","props","state","imageUrl","applyList","page","record","loading","componentDidMount","res","getApplyData","setState","getTable","resid","console","log","map","item","studyType","split","push","message","onApply","onBack","onCheck","showImage","onChangeCheckbox","checkedValues","handleSubmit","e","type","form","validateFieldsAndScroll","err","values","onSubmit","onSubmitRecord","isSubmit","modifyRecords","Error","success","handleUploadFile","fileInfo","bucketname","fileUrl","encodeURIComponent","then","obj","study","toString","doctor","hospital","post","phoneNumber","phone","email","teamPeople","teamPeople2","teamPeople3","CDPatientNumber","CDNumber","UCPatientNumber","UCNumber","doctorPhoto","addRecords","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","handleChange","info","originFileObj","renderPage","render","getFieldDecorator","prop","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","uploadButton","options","label","value","showImagePage","checkPage","backgroundSize","listPage","REC_CRTTIME","applyPage","rules","required","whitespace","handleRemoveFile","width","isShowImage","pages","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./ApplyDataBase.less\";\nimport {\n  Collapse,\n  Icon,\n  Input,\n  Upload,\n  Button,\n  Form,\n  Checkbox,\n  List,\n  Skeleton,\n  Avatar,\n  message,\n  Popconfirm,\n  Spin\n} from \"antd\";\nimport http from \"../../../utils/api\";\nimport ShowImage from \"./ShowImage\";\nimport applyDataBaseImage from \"../../../assets/images/applyDataBase.jpg\";\nconst applyDataBaseId = \"620384838453\";\n\nconst uploadFile = (file, url) => {\n  return new Promise((resolve, reject) => {\n    let fd = new FormData();\n    fd.append(\"file\", file, file.name);\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url);\n    xhr.onload = () => {\n      const data = JSON.parse(xhr.response);\n      if (xhr.status === 200 && (data.error === 0 || data.error === \"0\")) {\n        const imgUrl = data.data;\n        resolve(imgUrl);\n      } else {\n        reject(data);\n      }\n    };\n    xhr.send(fd);\n  });\n};\nclass ApplyDataBase extends Component {\n  state = {\n    imageUrl: \"\",\n    applyList: [],\n    page: \"listPage\",\n    record: {},\n    loading: false\n  };\n  constructor(props){\n    super(props)\n  }\n  componentDidMount = async () => {\n    let res;\n\n    await this.getApplyData();\n  };\n  //获取申请记录\n  getApplyData = async () => {\n    let res;\n    this.setState({\n      loading: true\n    });\n    try {\n      res = await http().getTable({\n        resid: applyDataBaseId\n      });\n      console.log(\"res.data.data\", res.data.data);\n      let data = [];\n\n      res.data.data.map(item => {\n        let studyType = item.studyType && item.studyType.split(\",\");\n        item.studyType = studyType;\n        data.push(item);\n      });\n      if (res.data.error == 0) {\n        this.setState({\n          applyList: data\n        });\n      }\n    } catch (error) {\n      message.error(error.message);\n    }\n    this.setState({\n      loading: false\n    });\n  };\n  onApply = () => {\n    this.setState({\n      page: \"applyPage\"\n    });\n  };\n  onBack = () => {\n    this.setState({\n      page: \"listPage\"\n    });\n  };\n  onCheck = item => {\n    console.log(\"bbbb\")\n    this.setState({\n      page: \"checkPage\",\n      record: item\n    });\n  };\n  showImage = () => {\n    this.setState({\n      page: \"showImagePage\"\n    });\n  };\n  onChangeCheckbox = checkedValues => {\n    // console.log(\"checkedValues\", study);\n  };\n  handleSubmit = (e, type) => {\n    // console.log(\"e\",e,type)\n    // e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.onSubmit(values, type);\n      }\n    });\n  };\n  //提交列表中的一条记录\n  onSubmitRecord = async record => {\n    let res;\n    record.isSubmit = \"Y\";\n    try {\n      res = await http().modifyRecords({\n        resid: applyDataBaseId,\n        data: [record]\n      });\n      if (res.data.Error == 0) {\n        message.success(\"提交成功\");\n      }\n    } catch (error) {\n      message.error(error.message);\n    }\n  };\n\n  //上传文件\n  handleUploadFile = async fileInfo => {\n    const file = fileInfo.file;\n    const bucketname = \"realsun\";\n    const type = \"\";\n    const fileUrl = `http://ivf.realsun.me:9001/api/AliyunOss/PutOneImageObject?bucketname=${encodeURIComponent(\n      bucketname\n    )}&srctype=${encodeURIComponent(type)}`;\n    try {\n      await uploadFile(file, fileUrl).then(imageUrl => {\n        this.setState({\n          imageUrl\n        });\n      });\n    } catch (err) {\n      return message.error(err.message);\n    }\n  };\n  //提交表单\n  onSubmit = async (values, type) => {\n    let res;\n    let obj = {};\n    let study = values.study && values.study.toString();\n    if (type === 1) {\n      obj = {\n        doctor: values.doctor,\n        hospital: values.hospital,\n        post: values.post,\n        phoneNumber: values.phone,\n        email: values.email,\n        teamPeople: values.teamPeople,\n        teamPeople2: values.teamPeople2,\n        teamPeople3: values.teamPeople3,\n        studyType: values.study,\n        CDPatientNumber: values.CDNumber,\n        UCPatientNumber: values.UCNumber,\n        doctorPhoto: this.state.imageUrl,\n        studyType: study\n      };\n    } else {\n      obj = {\n        doctor: values.doctor,\n        hospital: values.hospital,\n        post: values.post,\n        phoneNumber: values.phone,\n        email: values.email,\n        teamPeople: values.teamPeople,\n        teamPeople2: values.teamPeople2,\n        teamPeople3: values.teamPeople3,\n        studyType: values.study,\n        CDPatientNumber: values.CDNumber,\n        UCPatientNumber: values.UCNumber,\n        doctorPhoto: this.state.imageUrl,\n        studyType: study,\n        isSubmit: \"Y\"\n      };\n    }\n    try {\n      res = await http().addRecords({\n        resid: applyDataBaseId,\n        data: [obj]\n      });\n      if (res.data.Error == 0) {\n        message.success(\"申请成功！\");\n      }\n      this.setState({\n        page: \"listPage\"\n      });\n      this.getApplyData();\n    } catch (error) {\n      message.error(error.message);\n    }\n  };\n  getBase64 = (img, callback) => {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => callback(reader.result));\n    reader.readAsDataURL(img);\n  };\n  handleChange = info => {\n    console.log(\"info\", info);\n    if (info.file.status === \"uploading\") {\n      return;\n    }\n    if (info.file.status === \"done\") {\n      // Get this url from response in real world.\n      this.getBase64(info.file.originFileObj, imageUrl =>\n        this.setState({\n          imageUrl\n        })\n      );\n    }\n  };\n\n  renderPage = () => {\n    let page = this.state.page;\n    // switch(page){\n    //   case 'applyPage':\n    //     return (\n    //       this.applyPage\n    //     )\n    //     case 'checkPage':\n    //       return (\n    //         applyPage\n    //       )\n    //       case 'listPage':\n    //         return (\n    //           listPage\n    //         )\n    // }\n  };\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const prop = this.props;\n    const { imageUrl, applyList, loading, page, record } = this.state;\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      }\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    };\n    const uploadButton = (\n      <div>\n        <Icon type={this.state.loading ? \"loading\" : \"plus\"} />\n        <div className=\"ant-upload-text\">Upload</div>\n      </div>\n    );\n    const options = [\n      { label: \"单中心研究\", value: \"单中心研究\" },\n      { label: \"多中心研究\", value: \"多中心研究\" },\n      { label: \"第三方研究\", value: \"第三方研究\" },\n      { label: \"所有研究\", value: \"所有研究\" }\n    ];\n    const showImagePage = <ShowImage image={applyDataBaseImage}></ShowImage>;\n    const checkPage = (\n      <Form\n        {...formItemLayout}\n        // onSubmit={this.handleSubmit}\n        className=\"applyDataBase-form\"\n      >\n        <h1>参与CHASE-IBD数据库建设申请表</h1>\n        <h3>申请医疗单位</h3>\n        <Form.Item label={<span>申请人&nbsp;</span>}>\n          <span>{record.doctor}</span>\n        </Form.Item>\n        <Form.Item label={<span>所属单位&nbsp;</span>}>\n          <span>{record.hospital}</span>\n        </Form.Item>\n        <Form.Item label={<span>职称&nbsp;</span>}>\n          <span>{record.post}</span>\n        </Form.Item>\n        <Form.Item label={<span>联系电话&nbsp;</span>}>\n          <span>{record.phoneNumber}</span>\n        </Form.Item>\n        <Form.Item label={<span>E-mail&nbsp;</span>}>\n          <span>{record.email}</span>\n        </Form.Item>\n        <Form.Item label={<span>IBD治疗团队名单&nbsp;</span>}>\n          <span>{record.teamPeople}</span>&nbsp;&nbsp;\n          <span>{record.teamPeople2}</span>&nbsp;&nbsp;\n          <span>{record.teamPeople3}</span>&nbsp;&nbsp;\n        </Form.Item>\n        <Form.Item label={<span>选择参与数据库研究&nbsp;</span>}>\n          <Checkbox.Group\n            options={options}\n            defaultValue={record.studyType}\n            onChange={this.onChangeCheckbox}\n          />\n        </Form.Item>\n        <h3>贵院目前患者数量</h3>\n\n        <Form.Item label={<span>CD患者数量&nbsp;</span>}>\n          <span>{record.CDPatientNumber}</span>\n        </Form.Item>\n        <Form.Item label={<span>UC患者数量&nbsp;</span>}>\n          <span>{record.UCPatientNumber}</span>\n        </Form.Item>\n        <Form.Item label={<span>医师执照&nbsp;</span>}>\n          <img\n            src={record.doctorPhoto}\n            alt=\"avatar\"\n            style={{ backgroundSize: \"100%\" }}\n          />\n        </Form.Item>\n\n        <Button\n          icon=\"download\"\n          type=\"primary\"\n          className=\"applyDataBase-form-print\"\n        >\n          打印\n        </Button>\n      </Form>\n    );\n    const listPage = (\n      <List\n        className=\"applyDataBase-content-list\"\n        itemLayout=\"horizontal\"\n        dataSource={applyList}\n        renderItem={item => (\n          <List.Item\n            actions={[\n              <a\n                key=\"list-loadmore-edit\"\n                onClick={() => {\n                  this.onCheck(item);\n                }}\n              >\n                查看\n              </a>,\n              <Popconfirm\n                title=\"你确定要提交吗\"\n                onConfirm={() => {\n                  this.onSubmitRecord(item);\n                }}\n                okText=\"Yes\"\n                cancelText=\"No\"\n              >\n                <a key=\"list-loadmore-edit\">提交</a>\n              </Popconfirm>\n            ]}\n          >\n            {/* <Skeleton avatar title={false} loading={item.doctor} active> */}\n            <List.Item.Meta\n              // avatar={\n              //   <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n              // }\n              title={\n                <React.Fragment>\n                  <a className=\"applyDataBase-content-list-word\" href=\"#\">\n                    申请人:{item.doctor}\n                  </a>\n                  <a className=\"applyDataBase-content-list-word\" href=\"#\">\n                    所属单位:{item.hospital}\n                  </a>\n                </React.Fragment>\n              }\n              description=\"草稿\"\n            />\n            <div>申请日期：{item.REC_CRTTIME}</div>\n            {/* </Skeleton> */}\n          </List.Item>\n        )}\n      />\n    );\n    const applyPage = (\n      <Form\n        {...formItemLayout}\n        // onSubmit={this.handleSubmit}\n        className=\"applyDataBase-form\"\n      >\n        <h1>参与CHASE-IBD数据库建设申请表</h1>\n        <h3>申请医疗单位</h3>\n        <Form.Item label={<span>申请人&nbsp;</span>}>\n          {getFieldDecorator(\"doctor\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入申请人\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>所属单位&nbsp;</span>}>\n          {getFieldDecorator(\"hospital\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入所属单位\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>职称&nbsp;</span>}>\n          {getFieldDecorator(\"post\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入您的职称！\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>联系电话&nbsp;</span>}>\n          {getFieldDecorator(\"phone\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入您的联系电话!\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>E-mail&nbsp;</span>}>\n          {getFieldDecorator(\"email\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入您的邮箱!\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>IBD治疗团队名单&nbsp;</span>}>\n          {getFieldDecorator(\"teamPeople\")(<Input />)}\n          {getFieldDecorator(\"teamPeople2\", {})(<Input />)}\n          {getFieldDecorator(\"teamPeople3\", {})(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>选择参与数据库研究&nbsp;</span>}>\n          {getFieldDecorator(\"study\", {\n            rules: []\n          })(\n            <Checkbox.Group\n              options={options}\n              onChange={this.onChangeCheckbox}\n            />\n          )}\n        </Form.Item>\n        <h3>贵院目前患者数量</h3>\n\n        <Form.Item label={<span>CD患者数量：&nbsp;</span>}>\n          {getFieldDecorator(\"CDNumber\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入贵院的CD患者数量!\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>UC患者数量：&nbsp;</span>}>\n          {getFieldDecorator(\"UCNumber\", {\n            rules: [\n              {\n                required: true,\n                message: \"请输入贵院的UC患者数量!\",\n                whitespace: true\n              }\n            ]\n          })(<Input />)}\n        </Form.Item>\n        <Form.Item label={<span>医师执照：&nbsp;</span>}>\n          {getFieldDecorator(\"doctorPhoto\", {})(\n            <Upload\n              name=\"avatar\"\n              listType=\"picture-card\"\n              className=\"avatar-uploader\"\n              showUploadList={false}\n              customRequest={this.handleUploadFile}\n              // fileList={fileList}\n              onRemove={this.handleRemoveFile}\n              onChange={this.handleChange}\n            >\n              {imageUrl ? (\n                <img src={imageUrl} alt=\"avatar\" style={{ width: \"100%\" }} />\n              ) : (\n                uploadButton\n              )}\n            </Upload>\n          )}\n        </Form.Item>\n        <Button\n          className=\"applyDataBase-form-save\"\n          htmlType=\"submit\"\n          onClick={() => {\n            this.handleSubmit(this, 1);\n          }}\n        >\n          保存\n        </Button>\n        <Button\n          type=\"primary\"\n          className=\"applyDataBase-form-submit\"\n          htmlType=\"submit\"\n          onClick={() => {\n            this.handleSubmit(this, 2);\n          }}\n        >\n          提交\n        </Button>\n      </Form>\n    );\n\n    return (\n      <div className=\"applyDataBase\">\n        <div className=\"applyDataBase-btns\">\n          <Button\n            icon={\n              prop.page === \"applyPage\" || prop.page === \"checkPage\" ? \"rollback\" : \"plus\"\n            }\n            type=\"primary\"\n            onClick={\n              prop.page === \"applyPage\" || prop.page === \"checkPage\"\n                ? this.props.onBack\n                : this.props.onApply\n            }\n            className=\"applyDataBase-btn\"\n          >\n            {prop.page === \"applyPage\" || prop.page === \"checkPage\" ? \"返回\" : \"申请\"}\n          </Button>\n          <a\n            className=\"applyDataBase-photoBtn\"\n            type=\"link\"\n            onClick={prop.page === \"showImagePage\" ? this.props.onBack : this.props.showImage}\n          >\n            { prop.isShowImage ? '':  prop.page  === \"showImagePage\" ? \"返回\" : \"申请流程图\"}\n          </a>\n        </div>\n        <Spin spinning={loading}>\n          <div className=\"applyDataBase-content\">\n            {(() => {\n              console.log(\"prop\",prop)\n              switch (prop.page) {\n                case \"listPage\":\n                  return prop.pages.listPage;\n                case \"applyPage\":\n                  return prop.pages.applyPage;\n                case \"checkPage\":\n                  return prop.pages.checkPage;\n                case \"showImagePage\":\n                  return prop.pages.showImagePage;\n              }\n            })()}\n            {/* {page === \"applyPage\"\n            ? applyPage\n            : page === \"checkPage\"\n            ? checkPage:\n            page === 'showImagePage'?\n            showImagePage\n            : listPage} */}\n          </div>\n        </Spin>\n      </div>\n    );\n  }\n}\n\nexport default Form.create()(ApplyDataBase);\n"]},"metadata":{},"sourceType":"module"}