{"ast":null,"code":"import _Input from \"antd/es/input\";\nimport _Form from \"antd/es/form\";\nimport _Table from \"antd/es/table\";\nimport _Button from \"antd/es/button\";\nimport _Divider from \"antd/es/divider\";\nvar _jsxFileName = \"/Users/mac/Desktop/IBDRegister/src/components/busniess/EditNotice/EditNotice.js\";\nimport React, { Component } from \"react\";\nimport \"./EditNotice.less\";\nimport ApplyDataBase from '../ApplyDataBase';\nimport http from \"../../../utils/api\";\nimport TextArea from \"antd/lib/input/TextArea\";\nconst noticeId = \"620475440053\";\nconst formItemLayout = {\n  labelCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 8\n    }\n  },\n  wrapperCol: {\n    xs: {\n      span: 24\n    },\n    sm: {\n      span: 16\n    }\n  }\n};\n\nconst columns = props => {\n  const onCheck = props.onCheck;\n  return [{\n    title: \"序号\",\n    dataIndex: \"name\",\n    key: \"name\"\n  }, {\n    title: \"标题\",\n    dataIndex: \"title\",\n    key: \"title\",\n    render: text => React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, text)\n  }, {\n    title: \"消息内容\",\n    dataIndex: \"content\",\n    key: \"content\"\n  }, {\n    title: \"发布者\",\n    dataIndex: \"doctor\",\n    key: \"doctor\"\n  }, {\n    title: \"文件\",\n    dataIndex: \"file\",\n    key: \"file\"\n  }, {\n    title: \"状态\",\n    dataIndex: \"status\",\n    key: \"status\"\n  }, {\n    title: \"操作\",\n    key: \"action\",\n    render: (text, record) => React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: () => {\n        onCheck();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"\\u67E5\\u770B\"), React.createElement(_Divider, {\n      type: \"vertical\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"\\u4FEE\\u6539\"), React.createElement(_Divider, {\n      type: \"vertical\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"\\u53D1\\u5E03\"))\n  }];\n};\n\nclass EditNotice extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: [],\n      record: {},\n      page: 'listPage'\n    };\n\n    this.save = async e => {\n      let res;\n      this.props.form.validateFildsAndScroll((err, values) => {\n        console.log(\"err\", err, values);\n      });\n      let data = [];\n\n      try {\n        res = await http().addRecords({\n          resid: noticeId,\n          data\n        });\n      } catch (error) {}\n\n      this.setState({\n        page: 'listPage'\n      });\n    };\n\n    this.publish = () => {\n      this.setState({\n        page: 'listPage'\n      });\n    };\n\n    this.renderContent = () => {\n      let page = this.state.page;\n\n      switch (page) {\n        case 'listPage':\n          return this.renderListPage();\n\n        case 'addPage':\n          return this.renderAddPage();\n\n        case 'checkPage':\n          return this.renderCheckPage();\n      }\n    };\n\n    this.renderListPage = () => {\n      let data = this.state.data;\n      return React.createElement(\"div\", {\n        className: \"editNotice\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        className: \"editNotice-add\",\n        onClick: this.onAdd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"\\u6DFB\\u52A0\\u65B0\\u901A\\u77E5\"), React.createElement(_Table, {\n        className: \"EditNotice\",\n        columns: columns({\n          onCheck: this.onCheck\n        }),\n        dataSource: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }));\n    };\n\n    this.renderCheckPage = () => {\n      const getFieldDecorator = this.props.form.getFieldDecorator;\n      let record = this.state.record;\n      return React.createElement(\"div\", {\n        className: \"editNotice\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        className: \"editNotice-add\",\n        onClick: this.onBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"\\u8FD4\\u56DE\"), React.createElement(_Form, Object.assign({}, formItemLayout, {\n        // onSubmit={this.handleSubmit}\n        className: \"editNotice-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"\\u6D88\\u606F\\u7F16\\u8F91\"), React.createElement(_Form.Item, {\n        label: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, \"\\u6D88\\u606F\\u6807\\u9898\\xA0\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, record.doctor)), React.createElement(_Form.Item, {\n        label: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, \"\\u6D88\\u606F\\u5185\\u5BB9\\xA0\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, record.hospital)), React.createElement(_Form.Item, {\n        label: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, \"\\u6587\\u4EF6\\xA0\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, record.post)), React.createElement(_Form.Item, {\n        label: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"\\u533B\\u5E08\\u6267\\u7167\\xA0\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: record.doctorPhoto,\n        alt: \"avatar\",\n        style: {\n          backgroundSize: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      })), React.createElement(_Button, {\n        icon: \"download\",\n        type: \"primary\",\n        className: \"applyDataBase-form-print\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"\\u6253\\u5370\")));\n    };\n\n    this.renderAddPage = () => {\n      const getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        className: \"editNotice\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        className: \"editNotice-add\",\n        onClick: this.onBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"\\u8FD4\\u56DE\"), React.createElement(_Form, Object.assign({}, formItemLayout, {\n        // onSubmit={this.handleSubmit}\n        className: \"editNotice-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"\\u6D88\\u606F\\u7F16\\u8F91\"), React.createElement(_Form.Item, {\n        className: \"editNotice-form-item\",\n        label: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, \"\\u6807\\u9898\\xA0\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, getFieldDecorator(\"title\", {\n        rules: [{\n          required: true,\n          message: \"请输入标题\",\n          whitespace: true\n        }]\n      })(React.createElement(_Input, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }))), React.createElement(_Form.Item, {\n        className: \"editNotice-form-item\",\n        label: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, \"\\u6D88\\u606F\\u5185\\u5BB9\\xA0\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, getFieldDecorator(\"content\", {\n        rules: [{\n          required: true,\n          message: \"请输入消息内容\",\n          whitespace: true\n        }]\n      })(React.createElement(TextArea, {\n        className: \"editNotice-form-item-textarea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"editNotice-form-btns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        onClick: this.save,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"\\u4FDD\\u5B58\"), React.createElement(_Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        onClick: this.publish,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"\\u53D1\\u5E03\"))));\n    };\n\n    this.componentDidMount = async () => {\n      await this.getData();\n    };\n\n    this.getData = async () => {\n      let res;\n\n      try {\n        res = await http().getTable({\n          resid: noticeId\n        }); // if(res.data.error === 0){\n\n        this.setState({\n          data: res.data.data\n        });\n        console.log(\"re\", res.data.data); // }\n      } catch (error) {}\n    };\n\n    this.onAdd = () => {\n      this.setState({\n        page: 'addPage'\n      });\n    };\n\n    this.onBack = () => {\n      this.setState({\n        page: 'listPage'\n      });\n    };\n\n    this.onCheck = () => {\n      console.log(\"aaa\");\n      this.setState({\n        page: 'checkPage'\n      });\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          data = _this$state.data,\n          record = _this$state.record,\n          page = _this$state.page;\n    return this.renderContent();\n  }\n\n}\n\nexport default _Form.create()(EditNotice);","map":{"version":3,"sources":["/Users/mac/Desktop/IBDRegister/src/components/busniess/EditNotice/EditNotice.js"],"names":["React","Component","ApplyDataBase","http","TextArea","noticeId","formItemLayout","labelCol","xs","span","sm","wrapperCol","columns","props","onCheck","title","dataIndex","key","render","text","record","EditNotice","state","data","page","save","e","res","form","validateFildsAndScroll","err","values","console","log","addRecords","resid","error","setState","publish","renderContent","renderListPage","renderAddPage","renderCheckPage","onAdd","getFieldDecorator","onBack","doctor","hospital","post","doctorPhoto","backgroundSize","rules","required","message","whitespace","componentDidMount","getData","getTable","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { List, Tag, Divider, Table, message,Popconfirm, Button ,Form,Input} from \"antd\";\nimport \"./EditNotice.less\";\nimport ApplyDataBase from '../ApplyDataBase'\nimport http from \"../../../utils/api\";\nimport TextArea from \"antd/lib/input/TextArea\";\nconst noticeId = \"620475440053\";\nconst formItemLayout = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 8 }\n  },\n  wrapperCol: {\n    xs: { span: 24 },\n    sm: { span: 16 }\n  }\n};\nconst columns = props => {\n  const {onCheck} = props;\n  return  [{\n      title: \"序号\",\n      dataIndex: \"name\",\n      key: \"name\"\n    },\n    {\n      title: \"标题\",\n      dataIndex: \"title\",\n      key: \"title\",\n      render: text => <a>{text}</a>\n    },\n    {\n      title: \"消息内容\",\n      dataIndex: \"content\",\n      key: \"content\"\n    },\n    {\n      title: \"发布者\",\n      dataIndex: \"doctor\",\n      key: \"doctor\"\n    },\n    {\n      title: \"文件\",\n      dataIndex: \"file\",\n      key: \"file\"\n    },\n    {\n      title: \"状态\",\n      dataIndex: \"status\",\n      key: \"status\"\n    },\n    {\n      title: \"操作\",\n      key: \"action\",\n      render: (text, record) => (\n        <span>\n          <a onClick={() => {\n            onCheck();\n          }}>查看</a>\n          <Divider type=\"vertical\" />\n          <a>修改</a>\n          <Divider type=\"vertical\" />\n          <a>发布</a>\n        </span>\n      )\n    }\n  ]\n} \n  \nclass EditNotice extends React.Component {\n  state = {\n    data: [],\n    record:{},\n    page:'listPage'\n  };\n  save = async(e) => {\n    let res;\n    this.props.form.validateFildsAndScroll((err,values) => {\n      console.log(\"err\",err,values)\n    })\n    let data = [\n\n    ]\n    try {\n      res = await http().addRecords({\n        resid:noticeId,\n        data\n      })\n    } catch (error) {\n      \n    }\n    this.setState({\n      page:'listPage'\n    })\n  }\n  publish = () => {\n    this.setState({\n      page:'listPage'\n    })\n  }\n  renderContent = () => {\n    let page = this.state.page;\n    switch(page){\n      case 'listPage':\n        return this.renderListPage()\n        case 'addPage':\n          return this.renderAddPage();\n          case 'checkPage':\n            return this.renderCheckPage();\n    }\n  }\n  renderListPage = () => {\n    let data = this.state.data;\n    return   <div className='editNotice'>\n    <Button type='primary' className='editNotice-add' onClick={this.onAdd}>添加新通知</Button>\n    <Table className='EditNotice' columns={columns({onCheck:this.onCheck})}  dataSource={data} />\n    </div>\n  }\n  renderCheckPage = () => {\n    const { getFieldDecorator } = this.props.form;\n    let record = this.state.record;\n    return <div className='editNotice'>\n    <Button type='primary' className='editNotice-add' onClick={this.onBack}>返回</Button><Form\n    {...formItemLayout}\n    // onSubmit={this.handleSubmit}\n    className=\"editNotice-form\"\n  >\n    <h1>消息编辑</h1>\n    <Form.Item label={<span>消息标题&nbsp;</span>}>\n      <span>{record.doctor}</span>\n    </Form.Item>\n    <Form.Item label={<span>消息内容&nbsp;</span>}>\n      <span>{record.hospital}</span>\n    </Form.Item>\n    <Form.Item label={<span>文件&nbsp;</span>}>\n      <span>{record.post}</span>\n    </Form.Item>\n    <Form.Item label={<span>医师执照&nbsp;</span>}>\n      <img\n        src={record.doctorPhoto}\n        alt=\"avatar\"\n        style={{ backgroundSize: \"100%\" }}\n      />\n    </Form.Item>\n\n    <Button\n      icon=\"download\"\n      type=\"primary\"\n      className=\"applyDataBase-form-print\"\n    >\n      打印\n    </Button>\n  </Form></div> \n  }\n  renderAddPage = () => {\n    const { getFieldDecorator } = this.props.form;\n    return <div className='editNotice'>\n    <Button type='primary' className='editNotice-add' onClick={this.onBack}>返回</Button>\n     <Form\n    {...formItemLayout}\n    // onSubmit={this.handleSubmit}\n    className=\"editNotice-form\"\n  >\n    <h1>消息编辑</h1>\n    <Form.Item className='editNotice-form-item' label={<span>标题&nbsp;</span>}>\n      {getFieldDecorator(\"title\", {\n        rules: [\n          {\n            required: true,\n            message: \"请输入标题\",\n            whitespace: true\n          }\n        ]\n      })(<Input />)}\n    </Form.Item>\n    <Form.Item className='editNotice-form-item' label={<span>消息内容&nbsp;</span>}>\n      {getFieldDecorator(\"content\", {\n        rules: [\n          {\n            required: true,\n            message: \"请输入消息内容\",\n            whitespace: true\n          }\n        ]\n      })(<TextArea className='editNotice-form-item-textarea'/>)}\n     \n    </Form.Item>\n    <div className='editNotice-form-btns' >\n    <Button type='primary' \n          htmlType=\"submit\" onClick={this.save}>保存</Button>\n      <Button type='primary'\n          htmlType=\"submit\" onClick={this.publish}>发布</Button></div>\n  </Form>\n  </div>\n  }\n  componentDidMount = async () => {\n    await this.getData();\n  };\n  getData = async () => {\n    let res;\n    try {\n      res = await http().getTable({\n        resid: noticeId\n      });\n      // if(res.data.error === 0){\n      this.setState({\n        data: res.data.data\n      });\n      console.log(\"re\", res.data.data);\n      // }\n    } catch (error) {}\n  };\n  onAdd= () => {\n    this.setState({\n      page:'addPage'\n    })\n  }\n  onBack = () => {\n    this.setState({\n      page:'listPage'\n    })\n  }\n  onCheck = () => {\n    console.log(\"aaa\")\n    this.setState({\n      page:'checkPage'\n    })\n  }\n  render() {\n    const { data,record ,page} = this.state;\n  \n    return (\n      this.renderContent()\n   \n    )\n  }\n}\nexport default Form.create()(EditNotice)\n"]},"metadata":{},"sourceType":"module"}