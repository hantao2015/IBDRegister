{"ast":null,"code":"import _Spin from \"antd/es/spin\";\nimport _Modal from \"antd/es/modal\";\nimport _Form from \"antd/es/form\";\nimport _Upload from \"antd/es/upload\";\nimport _Table from \"antd/es/table\";\nimport _Button from \"antd/es/button\";\nimport _Icon from \"antd/es/icon\";\nimport _message from \"antd/es/message\";\nimport _Input from \"antd/es/input\";\nvar _jsxFileName = \"/Users/mac/Desktop/IBDRegister/src/components/busniess/UploadFile/UploadFile.js\";\nimport React, { Component } from \"react\";\nimport \"./UploadFile.less\";\nimport http from \"../../../utils/api\";\nconst TextArea = _Input.TextArea;\n\nconst columns = props => {\n  const onEdit = props.onEdit,\n        onPublish = props.onPublish,\n        data = props.data;\n  return [{\n    title: \"序号\",\n    dataIndex: \"number\",\n    key: \"number\",\n    width: 80\n  }, {\n    title: \"标题\",\n    dataIndex: \"title\",\n    key: \"title\",\n    width: 250,\n    render: text => React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, text)\n  }, {\n    title: \"消息内容\",\n    dataIndex: \"content\",\n    key: \"content\",\n    width: 400\n  }, {\n    title: \"发布者\",\n    dataIndex: \"publishPerson\",\n    key: \"publishPerson\",\n    width: 150\n  }, {\n    title: \"发布时间\",\n    dataIndex: \"publishTime\",\n    key: \"publishTime\",\n    width: 150\n  }, {\n    title: \"操作\",\n    key: \"action\",\n    width: 150,\n    render: (text, record) => React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: () => {\n        onEdit(record);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"\\u4FEE\\u6539\"), \")}\")\n  }];\n};\n\nconst uploadFile = (file, url) => {\n  return new Promise((resolve, reject) => {\n    let fd = new FormData();\n    fd.append(\"file\", file, file.name);\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url);\n\n    xhr.onload = () => {\n      const data = JSON.parse(xhr.response);\n\n      if (xhr.status === 200 && (data.error === 0 || data.error === \"0\")) {\n        const imgUrl = data.data;\n        resolve(imgUrl);\n      } else {\n        reject(data);\n      }\n    };\n\n    xhr.send(fd);\n  });\n};\n\nclass UploadFile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      spin: false,\n      data: [],\n      record: {},\n      visible: false\n    };\n\n    this.getApplyData = async () => {\n      let res;\n      this.setState({\n        loading: true\n      });\n\n      try {\n        res = await http().getTable({// resid: applyDataBaseId\n        });\n        let data = [];\n        res.data && res.data.data && res.data.data.map(item => {\n          let studyType = item.studyType && item.studyType.split(\",\");\n          item.studyType = studyType;\n          data.push(item);\n        });\n\n        if (res.data.error == 0) {\n          this.setState({\n            applyList: data\n          });\n        }\n      } catch (error) {\n        _message.error(error.message);\n      }\n\n      this.setState({\n        loading: false\n      });\n    };\n\n    this.handleSubmit = (e, type) => {\n      this.props.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          this.onSubmit(values, type);\n        }\n      });\n    };\n\n    this.handleUploadFile = async fileInfo => {\n      const file = fileInfo.file;\n      const bucketname = \"realsun\";\n      const type = \"\";\n      const fileUrl = \"http://ivf.realsun.me:9001/api/AliyunOss/PutOneImageObject?bucketname=\".concat(encodeURIComponent(bucketname), \"&srctype=\").concat(encodeURIComponent(type));\n\n      try {\n        await uploadFile(file, fileUrl).then(imageUrl => {\n          this.setState({\n            imageUrl\n          });\n        });\n      } catch (err) {\n        return _message.error(err.message);\n      }\n    };\n\n    this.onSubmit = async (values, type) => {\n      let res;\n      let obj = {};\n      let study = values.study && values.study.toString();\n\n      if (type === 1) {\n        obj = {\n          doctor: values.doctor,\n          hospital: values.hospital,\n          post: values.post,\n          phoneNumber: values.phone,\n          email: values.email,\n          teamPeople: values.teamPeople,\n          teamPeople2: values.teamPeople2,\n          teamPeople3: values.teamPeople3,\n          studyType: values.study,\n          CDPatientNumber: values.CDNumber,\n          UCPatientNumber: values.UCNumber,\n          doctorPhoto: this.state.imageUrl,\n          studyType: study\n        };\n      } else {\n        obj = {\n          doctor: values.doctor,\n          hospital: values.hospital,\n          post: values.post,\n          phoneNumber: values.phone,\n          email: values.email,\n          teamPeople: values.teamPeople,\n          teamPeople2: values.teamPeople2,\n          teamPeople3: values.teamPeople3,\n          studyType: values.study,\n          CDPatientNumber: values.CDNumber,\n          UCPatientNumber: values.UCNumber,\n          doctorPhoto: this.state.imageUrl,\n          studyType: study,\n          isSubmit: \"Y\"\n        };\n      }\n\n      try {\n        res = await http().addRecords({\n          // resid: applyDataBaseId,\n          data: [obj]\n        });\n\n        if (res.data.Error == 0) {\n          _message.success(\"申请成功！\");\n        }\n\n        this.setState({\n          page: \"listPage\"\n        });\n        this.getApplyData();\n      } catch (error) {\n        _message.error(error.message);\n      }\n    };\n\n    this.onAdd = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.getBase64 = (img, callback) => {\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => callback(reader.result));\n      reader.readAsDataURL(img);\n    };\n\n    this.handleChange = info => {\n      console.log(\"info\", info);\n\n      if (info.file.status === \"uploading\") {\n        return;\n      }\n\n      if (info.file.status === \"done\") {\n        // Get this url from response in real world.\n        this.getBase64(info.file.originFileObj, imageUrl => this.setState({\n          imageUrl\n        }));\n      }\n    };\n  }\n\n  componentDidMount() {} // this.getApplyData();\n  //获取申请记录\n\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    const _this$state = this.state,\n          spin = _this$state.spin,\n          record = _this$state.record,\n          data = _this$state.data;\n    const formItemLayout = {\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 8\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      }\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    };\n    const uploadButton = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: this.state.loading ? \"loading\" : \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"ant-upload-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, \"Upload\"));\n    return React.createElement(\"div\", {\n      className: \"editNotice\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      className: \"editNotice-add\",\n      onClick: this.onAdd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"\\u6DFB\\u52A0\\u65B0\\u901A\\u77E5\"), React.createElement(_Spin, {\n      spinning: spin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      key: \"3\",\n      className: \"editNotice-table\",\n      columns: columns({\n        onEdit: record => {\n          this.onEdit(record);\n        },\n        onPublish: (record, type) => {\n          this.onPublish(record, type);\n        },\n        data: data\n      }),\n      scroll: {\n        x: 1000,\n        y: \"calc(100vh - 260px)\"\n      },\n      dataSource: data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274\n      },\n      __self: this\n    }), React.createElement(_Modal, {\n      title: \"\\u4E0A\\u4F20\\u6587\\u4EF6\",\n      visible: this.state.visible,\n      width: 700,\n      onOk: this.handleOk,\n      onCancel: this.handleCancel,\n      destroyOnClose: true,\n      footer: [React.createElement(_Button, {\n        key: \"back\",\n        onClick: this.handleCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, \"\\u53D6\\u6D88\"), React.createElement(_Button, {\n        key: \"submit\",\n        type: \"primary\",\n        onClick: () => {\n          this.save(1);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, \"\\u4FDD\\u5B58\"), React.createElement(_Button, {\n        key: \"submit\",\n        type: \"primary\",\n        onClick: this.publish,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"\\u53D1\\u5E03\")],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, React.createElement(_Form, Object.assign({}, formItemLayout, {\n      className: \"editNotice-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }), React.createElement(_Form.Item, {\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316\n        },\n        __self: this\n      }, \"\\u8D44\\u6599\\uFF1A\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, getFieldDecorator(\"doctorPhoto\", {})(React.createElement(_Upload, {\n      name: \"avatar\",\n      listType: \"picture-card\",\n      className: \"avatar-uploader\",\n      showUploadList: false,\n      customRequest: this.handleUploadFile // fileList={fileList}\n      ,\n      onRemove: this.handleRemoveFile,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, fileUrl ? React.createElement(\"a\", {\n      href: fileUrl,\n      alt: \"avatar\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }) : uploadButton))), React.createElement(_Form.Item, {\n      className: \"editNotice-form-item\",\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"\\u6D88\\u606F\\u5185\\u5BB9\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, getFieldDecorator(\"content\", {\n      rules: [{\n        required: true,\n        message: \"请输入消息内容\",\n        whitespace: true\n      }]\n    })(React.createElement(TextArea, {\n      className: \"editNotice-form-item-textarea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }))))), React.createElement(_Modal, {\n      title: \"\\u4FEE\\u6539\\u901A\\u77E5\",\n      visible: this.state.editVisible,\n      width: 700,\n      onOk: this.handleOk,\n      onCancel: this.handleCancel,\n      destroyOnClose: true,\n      footer: [React.createElement(_Button, {\n        key: \"back\",\n        onClick: this.handleCancel,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, \"\\u53D6\\u6D88\"), React.createElement(_Button, {\n        key: \"submit\",\n        type: \"primary\",\n        onClick: () => {\n          this.save(2);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, \"\\u4FDD\\u5B58\")],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(_Form, Object.assign({}, formItemLayout, {\n      className: \"editNotice-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }), React.createElement(_Form.Item, {\n      className: \"editNotice-form-item\",\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381\n        },\n        __self: this\n      }, \"\\u6807\\u9898\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, getFieldDecorator(\"title\", {\n      rules: [{\n        required: true,\n        message: \"请输入标题\",\n        whitespace: true\n      }],\n      initialValue: record.title\n    })(React.createElement(_Input, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      className: \"editNotice-form-item\",\n      label: React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396\n        },\n        __self: this\n      }, \"\\u6D88\\u606F\\u5185\\u5BB9\\xA0\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }, getFieldDecorator(\"content\", {\n      rules: [{\n        required: true,\n        message: \"请输入消息内容\",\n        whitespace: true\n      }],\n      initialValue: record.content\n    })(React.createElement(TextArea, {\n      className: \"editNotice-form-item-textarea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default _Form.create()(UploadFile);","map":{"version":3,"sources":["/Users/mac/Desktop/IBDRegister/src/components/busniess/UploadFile/UploadFile.js"],"names":["React","Component","http","TextArea","columns","props","onEdit","onPublish","data","title","dataIndex","key","width","render","text","record","uploadFile","file","url","Promise","resolve","reject","fd","FormData","append","name","xhr","XMLHttpRequest","open","onload","JSON","parse","response","status","error","imgUrl","send","UploadFile","state","spin","visible","getApplyData","res","setState","loading","getTable","map","item","studyType","split","push","applyList","message","handleSubmit","e","type","form","validateFieldsAndScroll","err","values","onSubmit","handleUploadFile","fileInfo","bucketname","fileUrl","encodeURIComponent","then","imageUrl","obj","study","toString","doctor","hospital","post","phoneNumber","phone","email","teamPeople","teamPeople2","teamPeople3","CDPatientNumber","CDNumber","UCPatientNumber","UCNumber","doctorPhoto","isSubmit","addRecords","Error","success","page","onAdd","getBase64","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","handleChange","info","console","log","originFileObj","componentDidMount","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","tailFormItemLayout","offset","uploadButton","x","y","handleOk","handleCancel","save","publish","handleRemoveFile","rules","required","whitespace","editVisible","initialValue","content","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./UploadFile.less\";\nimport {\n  Collapse,\n  Icon,\n  Input,\n  Upload,\n  Button,\n  Form,\n  message,\n  Spin,\n  Modal,\n  Table\n} from \"antd\";\nimport http from \"../../../utils/api\";\n\nconst {TextArea} = Input;\nconst columns = props => {\n  const { onEdit, onPublish, data } = props;\n  return [\n    {\n      title: \"序号\",\n      dataIndex: \"number\",\n      key: \"number\",\n      width: 80\n    },\n    {\n      title: \"标题\",\n      dataIndex: \"title\",\n      key: \"title\",\n      width: 250,\n      render: text => <a>{text}</a>\n    },\n    {\n      title: \"消息内容\",\n      dataIndex: \"content\",\n      key: \"content\",\n      width: 400\n    },\n    {\n      title: \"发布者\",\n      dataIndex: \"publishPerson\",\n      key: \"publishPerson\",\n      width: 150\n    },\n    {\n      title: \"发布时间\",\n      dataIndex: \"publishTime\",\n      key: \"publishTime\",\n      width: 150\n    },\n    {\n      title: \"操作\",\n      key: \"action\",\n      width: 150,\n      render: (text, record) => (\n        <span>\n          <a\n            onClick={() => {\n              onEdit(record);\n            }}\n          >\n            修改\n          </a>\n          )}\n        </span>\n      )\n    }\n  ];\n};\nconst uploadFile = (file, url) => {\n  return new Promise((resolve, reject) => {\n    let fd = new FormData();\n    fd.append(\"file\", file, file.name);\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"POST\", url);\n    xhr.onload = () => {\n      const data = JSON.parse(xhr.response);\n      if (xhr.status === 200 && (data.error === 0 || data.error === \"0\")) {\n        const imgUrl = data.data;\n        resolve(imgUrl);\n      } else {\n        reject(data);\n      }\n    };\n    xhr.send(fd);\n  });\n};\nclass UploadFile extends Component {\n  state = {\n    spin:false,\n    data:[],\n    record:{},\n    visible:false\n  };\n  componentDidMount() {\n    // this.getApplyData();\n  }\n\n  //获取申请记录\n  getApplyData = async () => {\n    let res;\n    this.setState({\n      loading: true\n    });\n    try {\n      res = await http().getTable({\n        // resid: applyDataBaseId\n      });\n      let data = [];\n      res.data &&\n        res.data.data &&\n        res.data.data.map(item => {\n          let studyType = item.studyType && item.studyType.split(\",\");\n          item.studyType = studyType;\n          data.push(item);\n        });\n      if (res.data.error == 0) {\n        this.setState({\n          applyList: data\n        });\n      }\n    } catch (error) {\n      message.error(error.message);\n    }\n    this.setState({\n      loading: false\n    });\n  };\n\n  handleSubmit = (e, type) => {\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.onSubmit(values, type);\n      }\n    });\n  };\n\n  //上传文件\n  handleUploadFile = async fileInfo => {\n    const file = fileInfo.file;\n    const bucketname = \"realsun\";\n    const type = \"\";\n    const fileUrl = `http://ivf.realsun.me:9001/api/AliyunOss/PutOneImageObject?bucketname=${encodeURIComponent(\n      bucketname\n    )}&srctype=${encodeURIComponent(type)}`;\n    try {\n      await uploadFile(file, fileUrl).then(imageUrl => {\n        this.setState({\n          imageUrl\n        });\n      });\n    } catch (err) {\n      return message.error(err.message);\n    }\n  };\n  //提交表单\n  onSubmit = async (values, type) => {\n    let res;\n    let obj = {};\n    let study = values.study && values.study.toString();\n    if (type === 1) {\n      obj = {\n        doctor: values.doctor,\n        hospital: values.hospital,\n        post: values.post,\n        phoneNumber: values.phone,\n        email: values.email,\n        teamPeople: values.teamPeople,\n        teamPeople2: values.teamPeople2,\n        teamPeople3: values.teamPeople3,\n        studyType: values.study,\n        CDPatientNumber: values.CDNumber,\n        UCPatientNumber: values.UCNumber,\n        doctorPhoto: this.state.imageUrl,\n        studyType: study\n      };\n    } else {\n      obj = {\n        doctor: values.doctor,\n        hospital: values.hospital,\n        post: values.post,\n        phoneNumber: values.phone,\n        email: values.email,\n        teamPeople: values.teamPeople,\n        teamPeople2: values.teamPeople2,\n        teamPeople3: values.teamPeople3,\n        studyType: values.study,\n        CDPatientNumber: values.CDNumber,\n        UCPatientNumber: values.UCNumber,\n        doctorPhoto: this.state.imageUrl,\n        studyType: study,\n        isSubmit: \"Y\"\n      };\n    }\n    try {\n      res = await http().addRecords({\n        // resid: applyDataBaseId,\n        data: [obj]\n      });\n      if (res.data.Error == 0) {\n        message.success(\"申请成功！\");\n      }\n      this.setState({\n        page: \"listPage\"\n      });\n      this.getApplyData();\n    } catch (error) {\n      message.error(error.message);\n    }\n  };\n  onAdd = () => {\n    this.setState({\n      visible:true\n    })\n  }\n  getBase64 = (img, callback) => {\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", () => callback(reader.result));\n    reader.readAsDataURL(img);\n  };\n  handleChange = info => {\n    console.log(\"info\", info);\n    if (info.file.status === \"uploading\") {\n      return;\n    }\n    if (info.file.status === \"done\") {\n      // Get this url from response in real world.\n      this.getBase64(info.file.originFileObj, imageUrl =>\n        this.setState({\n          imageUrl\n        })\n      );\n    }\n  };\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const { spin ,record ,data} = this.state;\n    const formItemLayout = {\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 8 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      }\n    };\n    const tailFormItemLayout = {\n      wrapperCol: {\n        xs: {\n          span: 24,\n          offset: 0\n        },\n        sm: {\n          span: 16,\n          offset: 8\n        }\n      }\n    };\n    const uploadButton = (\n      <div>\n        <Icon type={this.state.loading ? \"loading\" : \"plus\"} />\n        <div className=\"ant-upload-text\">Upload</div>\n      </div>\n    );\n\n    return (\n      <div className=\"editNotice\">\n        <Button type=\"primary\" className=\"editNotice-add\" onClick={this.onAdd}>\n          添加新通知\n        </Button>\n        <Spin spinning={spin}>\n          <Table\n            key=\"3\"\n            className=\"editNotice-table\"\n            columns={columns({\n              onEdit: record => {\n                this.onEdit(record);\n              },\n              onPublish: (record, type) => {\n                this.onPublish(record, type);\n              },\n              data: data\n            })}\n            scroll={{ x: 1000, y: \"calc(100vh - 260px)\" }}\n            dataSource={data}\n          />\n          <Modal\n            title=\"上传文件\"\n            visible={this.state.visible}\n            width={700}\n            onOk={this.handleOk}\n            onCancel={this.handleCancel}\n            destroyOnClose={true}\n            footer={[\n              <Button key=\"back\" onClick={this.handleCancel}>\n                取消\n              </Button>,\n              <Button\n                key=\"submit\"\n                type=\"primary\"\n                onClick={() => {\n                  this.save(1);\n                }}\n              >\n                保存\n              </Button>,\n              <Button key=\"submit\" type=\"primary\" onClick={this.publish}>\n                发布\n              </Button>\n            ]}\n          >\n            <Form {...formItemLayout} className=\"editNotice-form\">\n              {/* <h1>消息编辑</h1> */}\n              <Form.Item label={<span>资料：&nbsp;</span>}>\n            {getFieldDecorator(\"doctorPhoto\", {})(\n              <Upload\n                name=\"avatar\"\n                listType=\"picture-card\"\n                className=\"avatar-uploader\"\n                showUploadList={false}\n                customRequest={this.handleUploadFile}\n                // fileList={fileList}\n                onRemove={this.handleRemoveFile}\n                onChange={this.handleChange}\n              >\n                {fileUrl ? (\n                  <a href={fileUrl} alt=\"avatar\" style={{ width: \"100%\" }} />\n                ) : (\n                  uploadButton\n                )}\n              </Upload>\n            )}\n          </Form.Item>\n              <Form.Item\n                className=\"editNotice-form-item\"\n                label={<span>消息内容&nbsp;</span>}\n              >\n                {getFieldDecorator(\"content\", {\n                  rules: [\n                    {\n                      required: true,\n                      message: \"请输入消息内容\",\n                      whitespace: true\n                    }\n                  ]\n                })(<TextArea className=\"editNotice-form-item-textarea\" />)}\n              </Form.Item>\n            </Form>\n          </Modal>\n\n\n\n          <Modal\n            title=\"修改通知\"\n            visible={this.state.editVisible}\n            width={700}\n            onOk={this.handleOk}\n            onCancel={this.handleCancel}\n            destroyOnClose={true}\n            footer={[\n              <Button key=\"back\" onClick={this.handleCancel}>\n                取消\n              </Button>,\n              <Button\n                key=\"submit\"\n                type=\"primary\"\n                onClick={() => {\n                  this.save(2);\n                }}\n              >\n                保存\n              </Button>\n            ]}\n          >\n            <Form {...formItemLayout} className=\"editNotice-form\">\n              {/* <h1>消息编辑</h1> */}\n              <Form.Item\n                className=\"editNotice-form-item\"\n                label={<span>标题&nbsp;</span>}\n              >\n                {getFieldDecorator(\"title\", {\n                  rules: [\n                    {\n                      required: true,\n                      message: \"请输入标题\",\n                      whitespace: true\n                    }\n                  ],\n                  initialValue: record.title\n                })(<Input />)}\n              </Form.Item>\n              <Form.Item\n                className=\"editNotice-form-item\"\n                label={<span>消息内容&nbsp;</span>}\n              >\n                {getFieldDecorator(\"content\", {\n                  rules: [\n                    {\n                      required: true,\n                      message: \"请输入消息内容\",\n                      whitespace: true\n                    }\n                  ],\n                  initialValue: record.content\n                })(<TextArea className=\"editNotice-form-item-textarea\" />)}\n              </Form.Item>\n            </Form>\n          </Modal>\n        </Spin>\n      </div>\n    );\n  }\n}\n\nexport default Form.create()(UploadFile);\n"]},"metadata":{},"sourceType":"module"}